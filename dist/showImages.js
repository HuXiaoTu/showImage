!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("show-images",[],t):"object"==typeof exports?exports["show-images"]=t():e["show-images"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=4)}([function(e,t){function o(e,t){var o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var r=n(i);return[o].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([r]).join("\n")}return[o].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=o(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),t.push(a))}},t}},function(e,t,o){"use strict";function n(e,t,o,n){h=o,v=n||{};var r=Object(l.a)(e,t);return i(r),function(t){for(var o=[],n=0;n<r.length;n++){var a=r[n],s=m[a.id];s.refs--,o.push(s)}t?(r=Object(l.a)(e,t),i(r)):r=[];for(var n=0;n<o.length;n++){var s=o[n];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete m[s.id]}}}}function i(e){for(var t=0;t<e.length;t++){var o=e[t],n=m[o.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](o.parts[i]);for(;i<o.parts.length;i++)n.parts.push(a(o.parts[i]));n.parts.length>o.parts.length&&(n.parts.length=o.parts.length)}else{for(var r=[],i=0;i<o.parts.length;i++)r.push(a(o.parts[i]));m[o.id]={id:o.id,refs:1,parts:r}}}}function r(){var e=document.createElement("style");return e.type="text/css",u.appendChild(e),e}function a(e){var t,o,n=document.querySelector("style["+b+'~="'+e.id+'"]');if(n){if(h)return p;n.parentNode.removeChild(n)}if(y){var i=g++;n=f||(f=r()),t=s.bind(null,n,i,!1),o=s.bind(null,n,i,!0)}else n=r(),t=c.bind(null,n),o=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else o()}}function s(e,t,o,n){var i=o?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function c(e,t){var o=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),v.ssrId&&e.setAttribute(b,t.id),i&&(o+="\n/*# sourceURL="+i.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var l=o(8),d="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var m={},u=d&&(document.head||document.getElementsByTagName("head")[0]),f=null,g=0,h=!1,p=function(){},v=null,b="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),x=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}()},function(e,t,o){"use strict";var n=o(10),i=(o.n(n),o(14)),r=o.n(i);t.a={name:"show-images",props:{imgList:{type:Array,default:function(){return[]}},showIndex:{type:Number,default:0},baseIp:{type:String,default:""}},data:function(){return{form:{intervalTime:1,isRepeat:!1,isPlay:!1,isLoading:!1,scale:1,showIndex:0,jumpNumber:1,pageLoading:!1},list:{intervalTimeData:[.2,.4,.6,.8,1,2,3,4,5,6,7,8,9,10,30,60,90],imageCacheList:[]}}},methods:{playPause:function(e){var t=this;if(this.form.isPlay=!this.form.isPlay,"pause"===e){!function e(){if(t.form.isPlay){if(t.form.showIndex===t.imgList.length-1){if(!t.form.isRepeat)return t.form.isPlay=!1;t.form.showIndex=0}else t.form.showIndex++;t.loadingImg(t.form.showIndex,t.imgList,function(){setTimeout(function(){e()},1e3*t.form.intervalTime)})}}()}},leftOrRight:function(e){if(this.form.isPlay=!1,"left"===e){if(0===this.form.showIndex)return this.$emit("error",{message:"当前已是第一张"});this.form.showIndex--}else if("right"===e){if(this.form.showIndex===this.imgList.length-1)return this.$emit("error",{message:"当前已是最后一张"});this.form.showIndex++}this.loadingImg(this.form.showIndex,this.imgList)},jumpNumber:function(){var e=Number(this.form.jumpNumber)-1;if(!this.imgList[e])return this.$emit("error",{message:"指定张数不存在，请重新输入！"});this.form.isPlay=!1,this.form.showIndex=e,this.loadingImg(this.form.showIndex,this.imgList)},downLoadGIF:function(){function e(e,t){for(var o=e.split(","),n=o[0].match(/:(.*?);/),i=(n&&n.length>1?n[1]:t)||t,r=window.atob(o[1]),a=new ArrayBuffer(r.length),s=new Uint8Array(a),c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return new Blob([a],{type:i})}function t(e,t,o){var n=document.createElement("a"),i=e;"string"==typeof e?n.target="_blank":i=window.URL.createObjectURL(e),n.href=i,n.download=t+"."+o,document.body.appendChild(n),n.click(),document.body.removeChild(n),"string"!=typeof e&&window.URL.revokeObjectURL(i)}var o=this;if(!this.imgList||0===this.imgList.length)return this.$emit("error",{message:"数据列表为空，无法生成GIF！"});this.gitLoadImg(0,this.imgList,function(n){if(!n)return o.$emit("error",{message:"图片加载失败！"});o.form.pageLoading=!0,r.a.createGIF({images:o.imgList,interval:o.form.intervalTime,gifWidth:n.width,gifHeight:n.height},function(n){if(o.form.pageLoading=!1,!n.error){t(e(n.image,"gif"),"a","gif")}})})},loadingImg:function(e,t){var o=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=document.querySelector(".moreImageContBox"),r=this.list.imageCacheList[e];if(r)return i.innerHTML="",i.appendChild(r),void(n&&n(r));this.form.isLoading=!0;var a=new Image;a.onload=function(){o.imgMethods(a),o.form.isLoading=!1;var t=o.imgWidthHeight(a,i);a.style.height=t.height,a.style.width=t.width,a.style.position="absolute",i.innerHTML="",i.appendChild(a),o.list.imageCacheList[e]=a,n&&n(a)},a.onerror=function(){o.form.isLoading=!1,o.$emit("error",{message:"图片加载失败"})},a.src=this.baseIp+t[e]},gitLoadImg:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new Image;n.onload=function(){o&&o(n)},n.onerror=function(){return o(null)},n.src=this.baseIp+t[e]},imgWidthHeight:function(e,t){var o=e.height;return e.width/o>t.offsetWidth/t.offsetHeight?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}},imgMethods:function(e){var t=this;e.onmousewheel=function(e){if(e.preventDefault(),e.wheelDelta>0)t.form.scale+=.1;else{if(t.form.scale<.4)return;t.form.scale-=.1}e.target.style.transform="scale("+t.form.scale+") "},e.onmousedown=function(e){e.preventDefault();var t=e.target,o=e.clientX-t.offsetLeft,n=e.clientY-t.offsetTop;document.onmousemove=function(e){var i=e.clientX-o,r=e.clientY-n;t.style.left=i+"px",t.style.top=r+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},mounted:function(){if(!Array.isArray(this.imgList)||0===this.imgList.length)return this.$emit("error",{message:"图片列表为空！"}),void(this.form.isLoading=!0);(this.showIndex||0===this.showIndex)&&(this.loadingImg(this.showIndex,this.imgList),this.form.showIndex=this.showIndex)}}},function(e,t){e.exports="/dist/iconfont/iconfont.eot"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(5);n.a.install=function(e){return e.component(n.a.name,n.a)},t.default=n.a},function(e,t,o){"use strict";function n(e){o(6)}var i=o(2),r=o(15),a=o(9),s=n,c=a(i.a,r.a,!1,s,null,null);t.a=c.exports},function(e,t,o){var n=o(7);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o(1).default;i("3dd99d74",n,!0,{})},function(e,t,o){t=e.exports=o(0)(!1),t.push([e.i,'.moreImage{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:111;display:flex;flex-direction:column;background-color:#fff}@keyframes loadingAnimation{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.moreImage .icon-Loading{animation:loadingAnimation 1s linear infinite}.moreImage .moreImageTop{height:50px;text-align:right}.moreImage .moreImageTop .iconfont{margin:10px;display:inline-block;font-size:25px;cursor:pointer}.moreImage .moreImageCont{flex:1;position:relative;overflow:hidden}.moreImage .moreImageCont .moreImageContBox{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative;user-select:none}.moreImage .moreImageCont .moreImageContBox>image{display:inline-block}.moreImage .moreImageCont .iconfont{position:absolute;font-size:50px;color:#606266;top:50%;transform:translateY(-50%);display:none;cursor:pointer}.moreImage .moreImageCont .iconLeft{left:30px}.moreImage .moreImageCont .iconRight{right:30px}.moreImage .moreImageCont:hover .iconfont{display:inline-block}.moreImage .moreImageBot{height:150px;text-align:center}.moreImage .moreImageBot .moreImageBotBtn{display:inline-block}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnM{color:#999;padding:5px 0}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox{display:flex}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox>div{vertical-align:middle}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxB{height:50px;line-height:50px;user-select:none}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxB .iconfont{margin:10px;font-size:30px;cursor:pointer}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ{display:flex;align-items:center;margin-left:5px}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ .jumpInput,.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ>select{outline:none;height:25px;line-height:25px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ .switch-component{position:relative;width:40px;height:20px;background-color:#dadada;border-radius:20px;border:none;outline:none;-webkit-appearance:none;transition:all .2s ease;border:1px solid #ccc;cursor:pointer}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ .switch-component:after{content:"";position:absolute;top:0;left:0;width:50%;height:100%;background-color:#fff;border-radius:50%;transition:all .2s ease}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ .switch-component:checked{background-color:#86c0fa}.moreImage .moreImageBot .moreImageBotBtn .moreImageBotBtnBox .moreImageBotBtnBoxJ .switch-component:checked:after{left:50%}.moreImage .loadingBox{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.479);display:flex;align-items:center;justify-content:center}.moreImage .loadingBox .loadingBtn{width:40px;height:40px;font-size:40px;color:#fff}.moreImage .el-select,.moreImage .el-select .el-input,.moreImage .el-select .el-input .el-input__inner{height:25px}.moreImage .el-select .el-input .el-select__caret{line-height:25px}.moreImage .el-input__inner{height:25px;line-height:25px;padding:0 5px}',""])},function(e,t,o){"use strict";function n(e,t){for(var o=[],n={},i=0;i<t.length;i++){var r=t[i],a=r[0],s=r[1],c=r[2],l=r[3],d={id:e+":"+i,css:s,media:c,sourceMap:l};n[a]?n[a].parts.push(d):o.push(n[a]={id:a,parts:[d]})}return o}t.a=n},function(e,t){e.exports=function(e,t,o,n,i,r){var a,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(a=e,s=e.default);var l="function"==typeof s?s.options:s;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId=i);var d;if(r?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=d):n&&(d=n),d){var m=l.functional,u=m?l.render:l.beforeCreate;m?(l._injectStyles=d,l.render=function(e,t){return d.call(t),u(e,t)}):l.beforeCreate=u?[].concat(u,d):[d]}return{esModule:a,exports:s,options:l}}},function(e,t,o){var n=o(11);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o(1).default;i("08cf7a12",n,!0,{})},function(e,t,o){var n=o(12);t=e.exports=o(0)(!1),t.push([e.i,"@font-face{font-family:iconfont;src:url("+n(o(3))+");src:url("+n(o(3))+'#iefix) format("embedded-opentype"),url("data:application/x-font-woff2;charset=utf-8;base64,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") format("woff2"),url('+n(o(13))+'#iconfont) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-guanbi:before{content:"\\E609"}.icon-xiazai:before{content:"\\E623"}.icon-Loading:before{content:"\\E65D"}.icon-bofang:before{content:"\\E619"}.icon-you:before{content:"\\E625"}.icon-zuo:before{content:"\\E627"}.icon-bofang1:before{content:"\\E6B4"}',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,o){e.exports=o.p+"iconfont.svg?41d1800ad7f80800e5d76dd1812ff758"},function(e,t,o){var n,i;!function(o,r,a,s){"use strict";function c(){return A.isValid()}function l(){return A.isValid()}function d(){var e={getUserMedia:!0};return A.isValid(e)}function m(e){var t=!1;if(B.isArray(e)&&e.length){if(B.each(e,function(e,o){B.isSupported.videoCodecs[o]&&(t=!0)}),!t)return!1}else if(B.isString(e)&&e.length&&!B.isSupported.videoCodecs[e])return!1;return A.isValid({getUserMedia:!0})}function u(){function e(e,t,o){var n,i;for(m=e,u=t,f=o,g=new Array(h),n=0;n<h;n++)g[n]=new Array(4),i=g[n],i[0]=i[1]=i[2]=(n<<w+8)/h|0,N[n]=A/h|0,H[n]=0}function t(){for(var e=[],t=new Array(h),o=0;o<h;o++)t[g[o][3]]=o;for(var n=0,i=0;i<h;i++){var r=t[i];e[n++]=g[r][0],e[n++]=g[r][1],e[n++]=g[r][2]}return e}function o(){var e,t,o,n,i,r,a,s;for(a=0,s=0,e=0;e<h;e++){for(i=g[e],o=e,n=i[1],t=e+1;t<h;t++)r=g[t],r[1]<n&&(o=t,n=r[1]);if(r=g[o],e!=o&&(t=r[0],r[0]=i[0],i[0]=t,t=r[1],r[1]=i[1],i[1]=t,t=r[2],r[2]=i[2],i[2]=t,t=r[3],r[3]=i[3],i[3]=t),n!=a){for(V[a]=s+e>>1,t=a+1;t<n;t++)V[t]=e;a=n,s=e}}for(V[a]=s+I>>1,t=a+1;t<256;t++)V[t]=I}function n(){var e,t,o,n,i,r,a,g,h,I,C,A,k,S;for(u<x&&(f=1),d=30+(f-1)/3,A=m,k=0,S=u,C=u/(3*f),I=C/B|0,g=j,r=T,a=r>>E,a<=1&&(a=0),e=0;e<a;e++)z[e]=g*((a*a-e*e)*U/(a*a));for(h=u<x?3:u%p!=0?3*p:u%v!=0?3*v:u%b!=0?3*b:3*y,e=0;e<C;)if(o=(255&A[k+0])<<w,n=(255&A[k+1])<<w,i=(255&A[k+2])<<w,t=l(o,n,i),c(g,t,o,n,i),0!==a&&s(a,t,o,n,i),k+=h,k>=S&&(k-=u),e++,0===I&&(I=1),e%I==0)for(g-=g/d,r-=r/M,a=r>>E,a<=1&&(a=0),t=0;t<a;t++)z[t]=g*((a*a-t*t)*U/(a*a))}function i(e,t,o){var n,i,r,a,s,c,l;for(s=1e3,l=-1,n=V[t],i=n-1;n<h||i>=0;)n<h&&(c=g[n],r=c[1]-t,r>=s?n=h:(n++,r<0&&(r=-r),a=c[0]-e,a<0&&(a=-a),(r+=a)<s&&(a=c[2]-o,a<0&&(a=-a),(r+=a)<s&&(s=r,l=c[3])))),i>=0&&(c=g[i],r=t-c[1],r>=s?i=-1:(i--,r<0&&(r=-r),a=c[0]-e,a<0&&(a=-a),(r+=a)<s&&(a=c[2]-o,a<0&&(a=-a),(r+=a)<s&&(s=r,l=c[3]))));return l}function r(){return n(),a(),o(),t()}function a(){var e;for(e=0;e<h;e++)g[e][0]>>=w,g[e][1]>>=w,g[e][2]>>=w,g[e][3]=e}function s(e,t,o,n,i){var r,a,s,c,l,d,m;for(s=t-e,s<-1&&(s=-1),c=t+e,c>h&&(c=h),r=t+1,a=t-1,d=1;r<c||a>s;){if(l=z[d++],r<c){m=g[r++];try{m[0]-=l*(m[0]-o)/W|0,m[1]-=l*(m[1]-n)/W|0,m[2]-=l*(m[2]-i)/W|0}catch(e){}}if(a>s){m=g[a--];try{m[0]-=l*(m[0]-o)/W|0,m[1]-=l*(m[1]-n)/W|0,m[2]-=l*(m[2]-i)/W|0}catch(e){}}}}function c(e,t,o,n,i){var r=g[t],a=e/j;r[0]-=a*(r[0]-o)|0,r[1]-=a*(r[1]-n)|0,r[2]-=a*(r[2]-i)|0}function l(e,t,o){var n,i,r,a,s,c,l,d,m,u;for(d=~(1<<31),m=d,c=-1,l=c,n=0;n<h;n++)u=g[n],i=u[0]-e,i<0&&(i=-i),r=u[1]-t,r<0&&(r=-r),i+=r,r=u[2]-o,r<0&&(r=-r),i+=r,i<d&&(d=i,c=n),a=i-(H[n]>>C-w),a<m&&(m=a,l=n),s=N[n]>>S,N[n]-=s,H[n]+=s<<k;return N[c]+=L,H[c]-=F,l}var d,m,u,f,g,h=256,p=499,v=491,b=487,y=503,x=3*y,I=h-1,w=4,B=100,C=16,A=1<<C,k=10,S=10,L=A>>S,F=A<<k-S,R=h>>3,E=6,O=1<<E,T=R*O,M=30,j=1024,U=256,W=1<<18,V=[],H=[],N=[],z=[];e.apply(this,arguments);var P={};return P.map=i,P.process=r,P}function f(){var e=this;try{e.onmessage=function(e){var o,n=e.data||{};n.gifshot&&(o=t.run(n),postMessage(o))}}catch(e){}var t={dataToRGB:function(e,t,o){for(var n=t*o*4,i=0,r=[];i<n;)r.push(e[i++]),r.push(e[i++]),r.push(e[i++]),i++;return r},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],o=0;o<e.length;o+=3){var n=e[o],i=e[o+1],r=e[o+2];t.push(n<<16|i<<8|r)}return t},processFrameWithQuantizer:function(e,t,o,n){for(var i=this.dataToRGB(e,t,o),r=new u(i,i.length,n),a=r.process(),s=new Uint32Array(this.componentizedPaletteToArray(a)),c=t*o,l=new Uint8Array(c),d=0,m=0;m<c;m++){var f=i[d++],g=i[d++],h=i[d++];l[m]=r.map(f,g,h)}return{pixels:l,palette:s}},run:function(e){e=e||{};var t=e,o=t.height,n=(t.palette,t.sampleInterval),i=t.width,r=e.data;return this.processFrameWithQuantizer(r,i,o,n)}};return t}function g(e,t,o,n){function i(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}function r(e,t,o,n){function i(o){for(;f>=o;)e[t++]=255&g,g>>=8,f-=8,t===a+256&&(e[a]=255,a=t++)}function r(e){g|=e<<f,f+=u,i(8)}e[t++]=o;var a=t++,c=1<<o,l=c-1,d=c+1,m=d+1,u=o+1,f=0,g=0,h=n[0]&l,p={};r(c);for(var v=1,b=n.length;v<b;++v){var y=n[v]&l,x=h<<8|y,I=p[x];if(I===s){for(g|=h<<f,f+=u;f>=8;)e[t++]=255&g,g>>=8,f-=8,t===a+256&&(e[a]=255,a=t++);4096===m?(r(c),m=d+1,u=o+1,p={}):(m>=1<<u&&++u,p[x]=m++),h=y}else h=I}return r(h),r(d),i(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}var a=0;n=n===s?{}:n;var c=n.loop===s?null:n.loop,l=n.palette===s?null:n.palette;if(t<=0||o<=0||t>65535||o>65535)throw"Width/Height invalid.";e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&o,e[a++]=o>>8&255,e[a++]=0|(null!==l?128:0),e[a++]=0,e[a++]=0,null!==c){if(c<0||c>65535)throw"Loop count invalid.";e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&c,e[a++]=c>>8&255,e[a++]=0}var d=!1;this.addFrame=function(t,o,n,c,m,u){if(!0===d&&(--a,d=!1),u=u===s?{}:u,t<0||o<0||t>65535||o>65535)throw"x/y invalid.";if(n<=0||c<=0||n>65535||c>65535)throw"Width/Height invalid.";if(m.length<n*c)throw"Not enough pixels for the frame size.";var f=!0,g=u.palette;if(g!==s&&null!==g||(f=!1,g=l),g===s||null===g)throw"Must supply either a local or global palette.";for(var h=i(g),p=0;h>>=1;)++p;h=1<<p;var v=u.delay===s?0:u.delay,b=u.disposal===s?0:u.disposal;if(b<0||b>3)throw"Disposal out of range.";var y=!1,x=0;if(u.transparent!==s&&null!==u.transparent&&(y=!0,(x=u.transparent)<0||x>=h))throw"Transparent color index.";if((0!==b||y||0!==v)&&(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=b<<2|(!0===y?1:0),e[a++]=255&v,e[a++]=v>>8&255,e[a++]=x,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&o,e[a++]=o>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&c,e[a++]=c>>8&255,e[a++]=!0===f?128|p-1:0,!0===f)for(var I=0,w=g.length;I<w;++I){var B=g[I];e[a++]=B>>16&255,e[a++]=B>>8&255,e[a++]=255&B}a=r(e,a,p<2?2:p,m)},this.end=function(){return!1===d&&(e[a++]=59,d=!0),a}}function h(e,t){e.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e})})}function p(){function e(){B.each(d,function(e,t){t&&(t.text?f.addFrame(t.img,i,t.text):f.addFrame(t,i))}),h(f,o)}var t=arguments.length>0&&arguments[0]!==s?arguments[0]:{},o=t.callback,n=t.images,i=t.options,a=t.imagesLength,c={getUserMedia:!0,"window.URL":!0},l=A.validate(c),d=[],m=0,u=void 0,f=void 0;if(l.error)return o(l);f=new E(i),B.each(n,function(t,n){var s=n;n.src&&(s=s.src),B.isElement(s)?(i.crossOrigin&&(s.crossOrigin=i.crossOrigin),d[t]=s,(m+=1)===a&&e()):B.isString(s)&&(u=new Image,i.crossOrigin&&(u.crossOrigin=i.crossOrigin),function(i){n.text&&(i.text=n.text),i.onerror=function(e){var t=void 0;if(0===--a)return t={},t.error="None of the requested images was capable of being retrieved",o(t)},i.onload=function(o){n.text?d[t]={img:i,text:i.text}:d[t]=i,m+=1,m===a&&e(),B.removeElement(i)},i.src=s}(u),B.setCSSAttr(u,{position:"fixed",opacity:"0"}),r.body.appendChild(u))})}function v(e){e=B.isObject(e)?e:{},M.stopVideoStreaming(e)}function b(e,t){var o=e.options||{},n=o.images,i=o.video,a=Number(o.gifWidth),s=Number(o.gifHeight),c=(Number(o.numFrames),e.cameraStream),l=e.videoElement,d=e.videoWidth,m=e.videoHeight,u=T.getCropDimensions({videoWidth:d,videoHeight:m,gifHeight:s,gifWidth:a}),f=t;o.crop=u,o.videoElement=l,o.videoWidth=d,o.videoHeight=m,o.cameraStream=c,B.isElement(l)&&(l.width=a+u.width,l.height=s+u.height,o.webcamVideoElement||(B.setCSSAttr(l,{position:"fixed",opacity:"0"}),r.body.appendChild(l)),l.play(),T.getGIF(o,function(e){n&&n.length||i&&i.length||v(e),f(e)}))}function y(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.callback,o=e.existingVideo,n=e.options,i={getUserMedia:!0,"window.URL":!0},r=A.validate(i),a=void 0,c=void 0;if(r.error)return t(r);if(B.isElement(o)&&o.src){if(c=o.src,a=B.getExtension(c),!B.isSupported.videoCodecs[a])return t(A.messages.videoCodecs)}else B.isArray(o)&&B.each(o,function(e,t){if(a=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),B.isSupported.videoCodecs[a])return o=t,!1});M.startStreaming({completed:function(e){e.options=n||{},b(e,t)},existingVideo:o,crossOrigin:n.crossOrigin,options:n})}function x(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.callback,o=e.lastCameraStream,n=e.options,i=e.webcamVideoElement;return l()?n.savedRenderingContexts.length?void T.getGIF(n,function(e){t(e)}):void M.startVideoStreaming(function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{};e.options=n||{},b(e,t)},{lastCameraStream:o,callback:t,webcamVideoElement:i,crossOrigin:n.crossOrigin}):t(A.validate())}function I(e,t){if(t=B.isFunction(e)?e:t,e=B.isObject(e)?e:{},B.isFunction(t)){var o=B.mergeOptions(L,e)||{},n=e.cameraStream,i=o.images,r=i?i.length:0,a=o.video,s=o.webcamVideoElement;o=B.mergeOptions(o,{gifWidth:Math.floor(o.gifWidth),gifHeight:Math.floor(o.gifHeight)}),r?p({images:i,imagesLength:r,callback:t,options:o}):a?y({existingVideo:a,callback:t,options:o}):x({lastCameraStream:n,callback:t,webcamVideoElement:s,options:o})}}function w(e,t){if(t=B.isFunction(e)?e:t,e=B.isObject(e)?e:{},B.isFunction(t)){var o=B.mergeOptions(L,e);I(B.mergeOptions(o,{interval:.1,numFrames:1,gifWidth:Math.floor(o.gifWidth),gifHeight:Math.floor(o.gifHeight)}),t)}}var B={URL:o.URL||o.webkitURL||o.mozURL||o.msURL,getUserMedia:function(){var e=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;return e?e.bind(a):e}(),requestAnimFrame:o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||B.noop,t=t||0,!B.requestAnimFrame)return setTimeout(e,t);var o=(new Date).getTime(),n=new Object,i=B.requestAnimFrame,r=function r(){(new Date).getTime()-o>=t?e.call():n.value=i(r)};return n.value=i(r),n},Blob:o.Blob||o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder,btoa:function(){var e=o.btoa||function(e){for(var t="",o=0,n=e.length,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=void 0,a=void 0,s=void 0,c=void 0,l=void 0,d=void 0,m=void 0;o<n;)r=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),c=r>>2,l=(3&r)<<4|a>>4,d=(15&a)<<2|s>>6,m=63&s,isNaN(a)?d=m=64:isNaN(s)&&(m=64),t=t+i.charAt(c)+i.charAt(l)+i.charAt(d)+i.charAt(m);return t};return e?e.bind(o):B.noop}(),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return B.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=r.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return o.Worker},blob:function(){return B.Blob},Uint8Array:function(){return o.Uint8Array},Uint32Array:function(){return o.Uint32Array},videoCodecs:function(){var e=r.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var o=void 0,n=void 0;if(B.isArray(e))for(o=-1,n=e.length;++o<n&&!1!==t(o,e[o]););else if(B.isObject(e))for(o in e)if(e.hasOwnProperty(o)&&!1===t(o,e[o]))break},mergeOptions:function(e,t){if(B.isObject(e)&&B.isObject(t)&&Object.keys){var o={};return B.each(e,function(t,n){o[t]=e[t]}),B.each(t,function(n,i){var r=t[n];B.isObject(r)&&e[n]?o[n]=B.mergeOptions(e[n],r):o[n]=r}),o}},setCSSAttr:function(e,t,o){B.isElement(e)&&(B.isString(t)&&B.isString(o)?e.style[t]=o:B.isObject(t)&&B.each(t,function(t,o){e.style[t]=o}))},removeElement:function(e){B.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!B.isString(e))return{};try{var t=new B.Blob([e],{type:"text/javascript"}),o=B.URL.createObjectURL(t);return{objectUrl:o,worker:new Worker(o)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{};if(!r.body||!1===e.resizeFont)return e.fontSize;var t=e.text,o=e.gifWidth,n=parseInt(e.fontSize,10),i=parseInt(e.minFontSize,10),a=r.createElement("div"),c=r.createElement("span");for(a.setAttribute("width",o),a.appendChild(c),c.innerHTML=t,c.style.fontSize=n+"px",c.style.textIndent="-9999px",c.style.visibility="hidden",r.body.appendChild(c);c.offsetWidth>o&&n>=i;)c.style.fontSize=--n+"px";return r.body.removeChild(c),n+"px"},webWorkerError:!1},C=Object.freeze({default:B}),A={validate:function(e){e=B.isObject(e)?e:{};var t={};return B.each(A.validators,function(o,n){var i=n.errorCode;if(!e[i]&&!n.condition)return t=n,t.error=!0,!1}),delete t.condition,t},isValid:function(e){return!0!==A.validate(e).error},validators:[{condition:B.isFunction(B.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:B.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:B.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:B.isFunction(B.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:B.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:B.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:B.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},k=Object.freeze({default:A}),S=function(){},L={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:S,completeCallback:S,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},F=Object.freeze({default:L}),R=function(){},E=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=R,this.onRenderProgressCallback=R,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};E.prototype={workerMethods:f(),initializeWebWorkers:function(e){var t=this,o=u.toString()+"("+f.toString()+"());",n=void 0,i=void 0,a=void 0,s=void 0,c=-1,l="";for(s=e.numWorkers;++c<s;)n=B.createWebWorker(o),B.isObject(n)?(i=n.objectUrl,a=n.worker,t.workers.push({worker:a,objectUrl:i}),t.availableWorkers.push(a)):(l=n,B.webWorkerError=!!n);this.workerError=l,this.canvas=r.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],t=0;t<256;t++)e[t]=String.fromCharCode(t);return e}(),bufferToString:function(e){for(var t=e.length,o="",n=-1;++n<t;)o+=this.byteMap[e[n]];return o},onFrameFinished:function(e){var t=this,o=t.frames,n=t.options,i=!!(n.images||[]).length,r=o.every(function(e){return!e.beingProcessed&&e.done});t.numRenderedFrames++,i&&e(t.numRenderedFrames/o.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/o.length),r?t.generatingGIF||t.generateGIF(o,t.onRenderCompleteCallback):B.requestTimeout(function(){t.processNextFrame()},1)},processFrame:function(e){var t=this,o=(this.options,this.options),n=o.progressCallback,i=o.sampleInterval,r=this.frames,a=void 0,c=void 0,l=function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},o=e.data;delete a.data,a.pixels=Array.prototype.slice.call(o.pixels),a.palette=Array.prototype.slice.call(o.palette),a.done=!0,a.beingProcessed=!1,t.freeWorker(c),t.onFrameFinished(n)};if(a=r[e],a.beingProcessed||a.done)return void this.onFrameFinished();a.sampleInterval=i,a.beingProcessed=!0,a.gifshot=!0,c=this.getWorker(),c?(c.onmessage=l,c.postMessage(a)):l({data:t.workerMethods.run(a)})},startRendering:function(e){this.onRenderCompleteCallback=e;for(var t=0;t<this.options.numWorkers&&t<this.frames.length;t++)this.processFrame(t)},processNextFrame:function(){for(var e=-1,t=0;t<this.frames.length;t++){var o=this.frames[t];if(!o.done&&!o.beingProcessed){e=t;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var o=[],n={loop:this.repeat},i=this.options,r=i.interval,a=i.frameDuration,s=i.images,c=!!s.length,l=i.gifHeight,d=i.gifWidth,m=new g(o,d,l,n),u=this.onRenderProgressCallback,f=c?100*r:0,h=void 0,p=void 0;this.generatingGIF=!0,B.each(e,function(t,o){var n=o.palette;u(.75+.25*o.position*1/e.length);for(var i=0;i<a;i++)m.addFrame(0,0,d,l,o.pixels,{palette:n,delay:f})}),m.end(),u(1),this.frames=[],this.generatingGIF=!1,B.isFunction(t)&&(h=this.bufferToString(o),p="data:image/gif;base64,"+B.btoa(h),t(p))},setRepeat:function(e){this.repeat=e},addFrame:function(e,t){t=B.isObject(t)?t:{};var o=this,n=o.ctx,i=o.options,r=i.gifWidth,a=i.gifHeight,s=B.getFontSize(t),c=t,l=c.filter,d=c.fontColor,m=c.fontFamily,u=c.fontWeight,f=(c.gifHeight,c.gifWidth,c.text),g=c.textAlign,h=c.textBaseline,p=t.textXCoordinate?t.textXCoordinate:"left"===g?1:"right"===g?r:r/2,v=t.textYCoordinate?t.textYCoordinate:"top"===h?1:"center"===h?a/2:a,b=u+" "+s+" "+m,y=void 0;try{n.filter=l,n.drawImage(e,0,0,r,a),f&&(n.font=b,n.fillStyle=d,n.textAlign=g,n.textBaseline=h,n.fillText(f,p,v)),y=n.getImageData(0,0,r,a),o.addFrameImageData(y)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=this.frames,o=e.data;this.frames.push({data:o,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this,o=function(o){t.destroyWorkers(),B.requestTimeout(function(){e(o)},0)};t.startRendering(o)},destroyWorkers:function(){if(!this.workerError){var e=this.workers;B.each(e,function(e,t){var o=t.worker,n=t.objectUrl;o.terminate(),B.URL.revokeObjectURL(n)})}}};var O=function(){},T={getGIF:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=arguments[1];t=B.isFunction(t)?t:O;var o=r.createElement("canvas"),n=void 0,i=e.images,a=!!i.length,c=e.cameraStream,l=e.crop,d=e.filter,m=e.fontColor,u=e.fontFamily,f=e.fontWeight,g=e.keepCameraOn,h=(e.numWorkers,e.progressCallback),p=e.saveRenderingContexts,v=e.savedRenderingContexts,b=e.text,y=e.textAlign,x=e.textBaseline,I=e.videoElement,w=e.videoHeight,C=e.videoWidth,A=e.webcamVideoElement,k=Number(e.gifWidth),S=Number(e.gifHeight),L=Number(e.interval),F=(Number(e.sampleInterval),a?0:1e3*L),R=[],T=v.length?v.length:e.numFrames,M=T,j=new E(e),U=B.getFontSize(e),W=e.textXCoordinate?e.textXCoordinate:"left"===y?1:"right"===y?k:k/2,V=e.textYCoordinate?e.textYCoordinate:"top"===x?1:"center"===x?S/2:S,H=f+" "+U+" "+u,N=l?Math.floor(l.scaledWidth/2):0,z=l?C-l.scaledWidth:0,P=l?Math.floor(l.scaledHeight/2):0,_=l?w-l.scaledHeight:0,D=function e(){function o(){try{z>C&&(z=C),_>w&&(_=w),N<0&&(N=0),P<0&&(P=0),n.filter=d,n.drawImage(I,N,P,z,_,0,0,k,S),i()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;B.requestTimeout(o,100)}}function i(){var o=void 0;p&&R.push(n.getImageData(0,0,k,S)),b&&(n.font=H,n.fillStyle=m,n.textAlign=y,n.textBaseline=x,n.fillText(b,W,V)),o=n.getImageData(0,0,k,S),j.addFrameImageData(o),M=r,h((T-M)/T),r>0&&B.requestTimeout(e,F),M||j.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e,cameraStream:c,videoElement:I,webcamVideoElement:A,savedRenderingContexts:R,keepCameraOn:g})})}var r=M-1;v.length?(n.putImageData(v[T-M],0,0),i()):o()};T=T!==s?T:10,L=L!==s?L:.1,o.width=k,o.height=S,n=o.getContext("2d"),function e(){if(!v.length&&0===I.currentTime)return void B.requestTimeout(e,100);D()}()},getCropDimensions:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.videoWidth,o=e.videoHeight,n=e.gifWidth,i=e.gifHeight,r={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>o?(r.width=Math.round(t*(i/o))-n,r.scaledWidth=Math.round(r.width*(o/i))):(r.height=Math.round(o*(n/t))-i,r.scaledHeight=Math.round(r.height*(t/n))),r}},M={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var o=t.cameraStream,n=t.completedCallback,i=t.videoElement;i&&(i.videoWidth>0&&i.videoHeight>0?(i.removeEventListener("loadeddata",M.findVideoSize),n({videoElement:i,cameraStream:o,videoWidth:i.videoWidth,videoHeight:i.videoHeight})):e.attempts<10?(e.attempts+=1,B.requestTimeout(function(){M.findVideoSize(t)},400)):n({videoElement:i,cameraStream:o,videoWidth:M.defaultVideoDimensions.width,videoHeight:M.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){B.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=B.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,o=e.cameraStream,n=e.completedCallback,i=e.streamedCallback,r=e.videoElement;if(B.isFunction(i)&&i(),t){if(B.isString(t))r.src=t,r.innerHTML='<source src="'+t+'" type="video/'+B.getExtension(t)+'" />';else if(t instanceof Blob){try{r.src=B.URL.createObjectURL(t)}catch(e){}r.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(r.mozSrcObject)r.mozSrcObject=o;else if(B.URL)try{r.srcObject=o,r.src=B.URL.createObjectURL(o)}catch(e){r.srcObject=o}r.play(),B.requestTimeout(function e(){e.count=e.count||0,!0===M.loadedData?(M.findVideoSize({videoElement:r,cameraStream:o,completedCallback:n}),M.loadedData=!1):(e.count+=1,e.count>10?M.findVideoSize({videoElement:r,cameraStream:o,completedCallback:n}):e())},0)},startStreaming:function(e){var t=B.isFunction(e.error)?e.error:B.noop,o=B.isFunction(e.streamed)?e.streamed:B.noop,n=B.isFunction(e.completed)?e.completed:B.noop,i=e.crossOrigin,a=e.existingVideo,s=e.lastCameraStream,c=e.options,l=e.webcamVideoElement,d=B.isElement(a)?a:l||r.createElement("video");i&&(d.crossOrigin=c.crossOrigin),d.autoplay=!0,d.loop=!0,d.muted=!0,d.addEventListener("loadeddata",function(e){M.loadedData=!0,c.offset&&(d.currentTime=c.offset)}),a?M.stream({videoElement:d,existingVideo:a,completedCallback:n}):s?M.stream({videoElement:d,cameraStream:s,streamedCallback:o,completedCallback:n}):B.getUserMedia({video:!0},function(e){M.stream({videoElement:d,cameraStream:e,streamedCallback:o,completedCallback:n})},t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==s?arguments[1]:{},o=t.timeout!==s?t.timeout:0,n=t.callback,i=t.webcamVideoElement,r=void 0;o>0&&(r=B.requestTimeout(function(){M.onStreamingTimeout(n)},1e4)),M.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(r)},completed:function(){var t=arguments.length>0&&arguments[0]!==s?arguments[0]:{},o=t.cameraStream,n=t.videoElement,i=t.videoHeight,r=t.videoWidth;e({cameraStream:o,videoElement:n,videoHeight:i,videoWidth:r})},lastCameraStream:t.lastCameraStream,webcamVideoElement:i,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){e=B.isObject(e)?e:{};var t=e,o=t.keepCameraOn,n=t.videoElement,i=t.webcamVideoElement,r=e.cameraStream||{},a=r.getTracks?r.getTracks()||[]:[],s=!!a.length,c=a[0];!o&&s&&B.isFunction(c.stop)&&c.stop(),B.isElement(n)&&!i&&(n.pause(),B.isFunction(B.URL.revokeObjectURL)&&!B.webWorkerError&&n.src&&B.URL.revokeObjectURL(n.src),B.removeElement(n))}},j={utils:C,error:k,defaultOptions:F,createGIF:I,takeSnapShot:w,stopVideoStreaming:v,isSupported:c,isWebCamGIFSupported:l,isExistingVideoGIFSupported:m,isExistingImagesGIFSupported:d,VERSION:"0.4.5"};n=[],(i=function(){return j}.apply(t,n))!==s&&(e.exports=i)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"moreImage"},[o("div",{staticClass:"moreImageTop"},[o("span",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.$emit("cancel")}}})]),e._v(" "),o("div",{staticClass:"moreImageCont"},[o("div",{staticClass:"moreImageContBox"}),e._v(" "),o("span",{staticClass:"iconfont iconLeft",class:[e.form.isLoading?"icon-Loading":"icon-zuo"],on:{click:function(t){return e.leftOrRight("left")}}}),e._v(" "),o("span",{staticClass:"iconfont iconRight",class:[e.form.isLoading?"icon-Loading":"icon-you"],on:{click:function(t){return e.leftOrRight("right")}}})]),e._v(" "),o("div",{staticClass:"moreImageBot"},[o("div",{staticClass:"moreImageBotBtn"},[o("div",{staticClass:"moreImageBotBtnM"},[e._v("\n                当前第"+e._s(this.form.showIndex+1)+"张/共"+e._s(this.imgList.length)+"张\n            ")]),e._v(" "),o("div",{staticClass:"moreImageBotBtnBox"},[o("div",{staticClass:"moreImageBotBtnBoxB"},[o("span",{staticClass:"iconfont",class:[e.form.isLoading?"icon-Loading":"icon-zuo"],on:{click:function(t){return e.leftOrRight("left")}}}),e._v(" "),e.form.isPlay?o("span",{staticClass:"iconfont",class:[e.form.isLoading?"icon-Loading":"icon-bofang1"],on:{click:function(t){return e.playPause("play")}}}):o("span",{staticClass:"iconfont",class:[e.form.isLoading?"icon-Loading":"icon-bofang"],on:{click:function(t){return e.playPause("pause")}}}),e._v(" "),o("span",{staticClass:"iconfont",class:[e.form.isLoading?"icon-Loading":"icon-you"],on:{click:function(t){return e.leftOrRight("right")}}}),e._v(" "),o("span",{staticClass:"iconfont",class:[e.form.isLoading?"icon-Loading":"icon-xiazai"],on:{click:e.downLoadGIF}})]),e._v(" "),o("div",{staticClass:"moreImageBotBtnBoxJ"},[o("span",[e._v("播放间隔：")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.form.intervalTime,expression:"form.intervalTime"}],attrs:{disabled:e.form.isLoading},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"intervalTime",t.target.multiple?o:o[0])}}},e._l(e.list.intervalTimeData,function(t){return o("option",{key:t,domProps:{value:t}},[e._v("\n                            "+e._s(t+"s")+"\n                        ")])}),0)]),e._v(" "),o("div",{staticClass:"moreImageBotBtnBoxJ"},[o("span",[e._v("重复播放：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.isRepeat,expression:"form.isRepeat"}],staticClass:"switch-component",attrs:{type:"checkbox",disabled:e.form.isLoading},domProps:{checked:Array.isArray(e.form.isRepeat)?e._i(e.form.isRepeat,null)>-1:e.form.isRepeat},on:{change:function(t){var o=e.form.isRepeat,n=t.target,i=!!n.checked;if(Array.isArray(o)){var r=e._i(o,null);n.checked?r<0&&e.$set(e.form,"isRepeat",o.concat([null])):r>-1&&e.$set(e.form,"isRepeat",o.slice(0,r).concat(o.slice(r+1)))}else e.$set(e.form,"isRepeat",i)}}})]),e._v(" "),o("div",{staticClass:"moreImageBotBtnBoxJ"},[o("span",[e._v("跳转至：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.jumpNumber,expression:"form.jumpNumber"}],staticClass:"jumpInput",staticStyle:{width:"55px"},attrs:{size:"mini",placeholder:"number",type:"number",disabled:e.form.isLoading},domProps:{value:e.form.jumpNumber},on:{blur:e.jumpNumber,input:function(t){t.target.composing||e.$set(e.form,"jumpNumber",t.target.value)}}})])])])]),e._v(" "),e.form.pageLoading?o("div",{staticClass:"loadingBox"},[o("span",{staticClass:"loadingBtn iconfont icon-Loading"})]):e._e()])},i=[],r={render:n,staticRenderFns:i};t.a=r}])});
//# sourceMappingURL=showImages.js.map